FROM ubuntu:24.04

# åŸºæœ¬ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
RUN apt-get update && \
    DEBIAN_FRONTEND=noninteractive apt-get install -y \
    curl \
    wget \
    git \
    python3 \
    python3-pip \
    python3-venv \
    nodejs \
    npm \
    build-essential \
    software-properties-common \
    ca-certificates \
    gnupg \
    lsb-release \
    && rm -rf /var/lib/apt/lists/*

# pyenvç’°å¢ƒè¨­å®šç”¨
RUN apt-get update && \
    DEBIAN_FRONTEND=noninteractive apt-get install -y \
    make \
    libssl-dev \
    zlib1g-dev \
    libbz2-dev \
    libreadline-dev \
    libsqlite3-dev \
    llvm \
    libncurses5-dev \
    libncursesw5-dev \
    xz-utils \
    tk-dev \
    libffi-dev \
    liblzma-dev \
    && rm -rf /var/lib/apt/lists/*

# ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
WORKDIR /workspace
RUN mkdir -p /home/nanashi7777/happyquest

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
RUN useradd -m -s /bin/bash nanashi7777 && \
    echo 'nanashi7777:password' | chpasswd && \
    usermod -aG sudo nanashi7777

# ç’°å¢ƒç¢ºèªã‚¹ã‚¯ãƒªãƒ—ãƒˆ
RUN echo '#!/bin/bash\n\
echo "ðŸ§ª HappyQuest Ubuntu24.04 ç’°å¢ƒæ§‹ç¯‰ãƒ†ã‚¹ãƒˆ"\n\
echo "===================================="\n\
echo "ðŸ“‹ åŸºæœ¬æƒ…å ±:"\n\
echo "  OS: $(cat /etc/os-release | grep PRETTY_NAME | cut -d= -f2)"\n\
echo "  Kernel: $(uname -r)"\n\
echo "  Architecture: $(uname -m)"\n\
echo ""\n\
echo "ðŸ Pythonç’°å¢ƒ:"\n\
python3 --version || echo "  Python3: æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"\n\
pip3 --version || echo "  pip3: æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"\n\
echo ""\n\
echo "ðŸ“¦ Node.jsç’°å¢ƒ:"\n\
node --version || echo "  Node.js: æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"\n\
npm --version || echo "  npm: æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"\n\
echo ""\n\
echo "ðŸ”§ é–‹ç™ºãƒ„ãƒ¼ãƒ«:"\n\
git --version || echo "  Git: æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"\n\
curl --version | head -1 || echo "  Curl: æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"\n\
wget --version | head -1 || echo "  Wget: æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"\n\
echo ""\n\
echo "âœ… ç’°å¢ƒæ§‹ç¯‰ãƒ†ã‚¹ãƒˆå®Œäº†"' > /usr/local/bin/test-environment.sh && \
    chmod +x /usr/local/bin/test-environment.sh

CMD ["bash"]