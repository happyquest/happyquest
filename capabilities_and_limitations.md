# Clineの能力と制限事項 (2025/03/30現在)

## 概要

このドキュメントは、AIアシスタントClineの現在の能力と制限事項、および利用可能なツールについてまとめたものです。今後の開発作業における共通認識を形成し、効率的な連携を図ることを目的とします。

## 基本的な能力

*   **ファイル操作:**
    *   `read_file`: 指定されたファイルの**内容全体**を読み取ることができます。
    *   `write_to_file`: 指定されたパスに**新しいファイルを作成**するか、**既存のファイルを完全に上書き**します。必要なディレクトリは自動的に作成されます。
    *   `replace_in_file`: 既存ファイル内の**特定の部分**を検索し、指定した内容に**置換**します。複数箇所の変更も可能です。
    *   `list_files`: 指定されたディレクトリ内のファイルとサブディレクトリの**一覧を表示**します（再帰的な表示も可能）。
*   **コード解析:**
    *   `list_code_definition_names`: 指定ディレクトリ内のソースコードからクラス名、関数名などの**定義名を抽出**し、一覧表示します。
    *   `search_files`: 指定ディレクトリ内のファイルに対して、**正規表現を用いた検索**を実行し、一致箇所と周辺コンテキストを表示します。
*   **コマンド実行:**
    *   `execute_command`: 指定された**シェルコマンドを実行**します。現在の作業ディレクトリ (`/home/taki/happyquest`) で実行されますが、`cd` コマンドを組み合わせることで他のディレクトリでの実行も可能です。
*   **MCP (Model Context Protocol) 連携:**
    *   `use_mcp_tool`: 接続されているMCPサーバーが提供する**ツールを実行**します。
    *   `access_mcp_resource`: 接続されているMCPサーバーが提供する**リソースにアクセス**します。
*   **対話:**
    *   `ask_followup_question`: タスク遂行に必要な追加情報を**ユーザーに質問**します。
    *   `attempt_completion`: タスクが完了したと判断した場合に、**結果を報告**します。
    *   `plan_mode_respond`: PLAN MODE時に、計画や相談に関する**応答**を行います。

## 重要な制限事項

*   **コマンド実行結果の読み取り不可:** `execute_command` でコマンドを実行できますが、その**標準出力（ターミナルに表示される結果）を直接読み取ることはできません**。コマンドが成功したか失敗したかのステータスのみ受け取ります。
    *   **対策:** コマンドの実行結果（バージョン情報、リスト表示など）が必要な場合は、お手数ですがユーザー様に結果を確認し、教えていただく必要があります。
*   **対話的なコマンド:** `execute_command` で実行するコマンドがユーザーの入力（パスワード、Yes/No確認など）を待つ場合、私が代わりに入力することはできません。ユーザー様自身でターミナルを操作していただく必要があります。
*   **GUI操作不可:** TimeshiftのGUI操作をお願いしたように、グラフィカルなインターフェースを持つアプリケーションを直接操作することはできません。
*   **Cursorの直接操作不可:** ユーザー様がCursor（VSCode拡張機能）を利用していることは認識していますが、私が直接Cursorの機能（例: GUIでのファイル編集、デバッガ操作など）を呼び出すことはできません。ただし、Cursorが内部的に利用している可能性のあるCLIツールや、Cursorが連携しているMCPサーバーがあれば、それらを介して間接的に連携できる可能性はあります。

## 接続済みMCPサーバーとその機能

現在、以下のMCPサーバーが接続されており、それぞれのツールを利用可能です。

### 1. Filesystem MCPサーバー (`github.com/modelcontextprotocol/servers/tree/main/src/filesystem`)

ローカルファイルシステムに対する詳細な操作を提供します。

*   `read_file`: 単一ファイルの読み込み。
*   `read_multiple_files`: 複数ファイルの同時読み込み。
*   `write_file`: ファイルの新規作成または完全上書き。
*   `edit_file`: ファイルの部分的な編集（行単位の置換）。
*   `create_directory`: ディレクトリの作成。
*   `list_directory`: ディレクトリ内容の詳細リスト表示。
*   `directory_tree`: ディレクトリ構造のツリー表示（JSON）。
*   `move_file`: ファイルやディレクトリの移動・リネーム。
*   `search_files`: 指定パターンに一致するファイルやディレクトリの検索。
*   `get_file_info`: ファイルやディレクトリのメタデータ（サイズ、更新日時など）取得。
*   `list_allowed_directories`: アクセス許可されたディレクトリの一覧表示。

**制限:** このサーバーがアクセスできるのは、設定で許可されたディレクトリ（現在は `/home/taki`）内に限定されます。

### 2. GitHub MCPサーバー (`github.com/modelcontextprotocol/servers/tree/main/src/github`)

GitHubリポジトリに対する操作を提供します。

*   `create_or_update_file`: リポジトリ内の単一ファイルの作成・更新。
*   `search_repositories`: リポジトリの検索。
*   `create_repository`: 新規リポジトリの作成。
*   `get_file_contents`: リポジトリ内のファイルやディレクトリの内容取得。
*   `push_files`: 複数ファイルを単一コミットでプッシュ。
*   `create_issue`: Issueの作成。
*   `create_pull_request`: Pull Requestの作成。
*   `fork_repository`: リポジトリのフォーク。
*   `create_branch`: ブランチの作成。
*   `list_commits`: コミット履歴の取得。
*   `list_issues`: Issueの一覧表示（フィルタリング可能）。
*   `update_issue`: Issueの更新。
*   `add_issue_comment`: Issueへのコメント追加。
*   `search_code`: コード検索。
*   `search_issues`: Issue/PR検索。
*   `search_users`: ユーザー検索。
*   `get_issue`: 特定Issueの詳細取得。

**制限:** GitHub APIの認証が必要です（現在は設定済み）。APIのレート制限を受ける可能性があります。

## 今後の進め方

この文書に記載された能力と制限を理解した上で、作業を進めてまいります。特にコマンド実行結果の確認など、ご協力をお願いする場面があるかと思いますが、よろしくお願いいたします。

MCPサーバーを追加・開発することで、私の能力を拡張することも可能です。例えば、特定のAPIと連携するMCPサーバーを作成すれば、そのAPIを通じた操作が可能になります。

ご不明な点や、さらに詳しく知りたい機能があれば、お気軽にお尋ねください。
