# 📋 コードレビューガイドライン

## 🎯 目的
このガイドラインは、HappyQuestプロジェクトにおけるコードレビューの品質と効率を向上させることを目的としています。

## 👥 レビュアーの責任

### 基本原則
1. **建設的なフィードバック**: 問題を指摘するだけでなく、改善案も提示する
2. **迅速な対応**: 24時間以内のレビュー完了を目指す
3. **学習機会の提供**: 新しい技術や手法を共有する
4. **品質の維持**: プロジェクトの技術的品質を保つ

### レビュー観点

#### 🔍 機能性
- [ ] 要求仕様を満たしているか
- [ ] エッジケースが適切に処理されているか
- [ ] エラーハンドリングが適切か
- [ ] ユーザビリティが考慮されているか

#### 📖 可読性
- [ ] コードが理解しやすいか
- [ ] 変数名・関数名が適切か
- [ ] コメントが適切に記載されているか
- [ ] コードの構造が論理的か

#### 🔧 保守性
- [ ] 将来の変更に対応しやすいか
- [ ] 重複コードがないか
- [ ] 適切な抽象化がされているか
- [ ] 依存関係が適切に管理されているか

#### ⚡ パフォーマンス
- [ ] 性能要件を満たしているか
- [ ] 不要な処理がないか
- [ ] メモリ使用量が適切か
- [ ] データベースクエリが最適化されているか

#### 🔒 セキュリティ
- [ ] 入力値検証が適切か
- [ ] 認証・認可が適切に実装されているか
- [ ] 機密情報の漏洩リスクがないか
- [ ] SQLインジェクション等の脆弱性がないか

#### 🧪 テスト
- [ ] 適切なテストが書かれているか
- [ ] テストカバレッジが十分か
- [ ] テストが保守しやすいか
- [ ] モックやスタブが適切に使用されているか

## 📝 レビューコメントのベストプラクティス

### 良いコメントの例
```markdown
💡 提案: この処理は共通化できそうです
現在の実装でも動作しますが、utils/validation.js に移動することで
他の場所でも再利用できるようになります。

// 例
const isValidEmail = (email) => { /* ... */ }
```

### 避けるべきコメントの例
```markdown
❌ 悪い例: "これは間違っています"
✅ 良い例: "この実装だとXXXの場合にエラーになる可能性があります。YYYの方法を検討してみてください。"
```

### コメントの分類
- 🐛 **Bug**: バグや問題の指摘
- 💡 **Suggestion**: 改善提案
- ❓ **Question**: 質問や確認事項
- 🎨 **Style**: コードスタイルの指摘
- 📚 **Documentation**: ドキュメント関連
- ⚡ **Performance**: パフォーマンス関連
- 🔒 **Security**: セキュリティ関連

## 🚀 レビュープロセス

### 1. 自動チェック
- [ ] CI/CDパイプラインの通過確認
- [ ] 静的解析ツールの結果確認
- [ ] テスト結果の確認
- [ ] セキュリティスキャンの結果確認

### 2. 手動レビュー
- [ ] コード全体の流れを理解
- [ ] 各ファイルの変更内容を確認
- [ ] テストコードの確認
- [ ] ドキュメントの確認

### 3. フィードバック
- [ ] 具体的で建設的なコメント
- [ ] 優先度の明示（必須/推奨/任意）
- [ ] 代替案の提示
- [ ] 学習リソースの共有

### 4. 承認・マージ
- [ ] 全ての指摘事項が解決
- [ ] 自動テストの通過
- [ ] 最終確認の実施
- [ ] マージの実行

## 📊 レビュー基準

### 承認基準
- ✅ **即座に承認**
  - 軽微な修正（タイポ、フォーマット等）
  - 明らかに正しい実装
  - 十分にテストされている

- 🔄 **条件付き承認**
  - 軽微な改善提案がある
  - 非必須の最適化が可能
  - ドキュメントの軽微な更新が必要

- ❌ **要修正**
  - 機能的な問題がある
  - セキュリティ上の問題がある
  - テストが不十分
  - 大幅な設計変更が必要

### 品質ゲート
- **テストカバレッジ**: 80%以上
- **静的解析**: エラー0件
- **セキュリティスキャン**: 脆弱性0件
- **パフォーマンステスト**: 基準値以内

## 🛠️ ツールとリソース

### 自動化ツール
- **ESLint**: JavaScript/TypeScript静的解析
- **Prettier**: コードフォーマット
- **Jest**: テストフレームワーク
- **SonarQube**: 品質分析
- **Snyk**: セキュリティスキャン

### 参考リソース
- [Google Code Review Guidelines](https://google.github.io/eng-practices/review/)
- [GitHub Code Review Guidelines](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests)
- [Best Practices for Code Review](https://smartbear.com/learn/code-review/best-practices-for-peer-code-review/)

## 📈 継続的改善

### メトリクス
- レビュー完了時間
- 指摘事項の種類・頻度
- バグ検出率
- 開発者満足度

### 改善アクション
- 定期的なガイドライン見直し
- レビュープロセスの最適化
- ツールの導入・改善
- チーム内での知識共有

---

**最終更新**: 2025年6月23日  
**次回見直し**: 2025年9月23日