name: Quick Test

on:
  push:
    branches: [ "main", "feature/*" ]
  pull_request:
    branches: [ "main" ]

jobs:
  quick-check:
    name: Quick Health Check
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: List project structure
        run: |
          echo "=== Project Structure ==="
          find . -type f -name "*.yml" -o -name "*.yaml" | head -10
          echo ""
          echo "=== Ansible Files ==="
          ls -la infrastructure/ansible/ || echo "ansible directory not found"
          echo ""
          echo "=== GitHub Actions ==="
          ls -la .github/workflows/
          echo ""
          echo "=== Docs ==="
          ls -la docs/ || echo "docs directory not found"

      - name: Basic YAML validation
        run: |
          echo "=== YAML Syntax Check ==="
          python -c "
          import yaml
          import os
          
          for root, dirs, files in os.walk('.'):
              for file in files:
                  if file.endswith(('.yml', '.yaml')):
                      filepath = os.path.join(root, file)
                      try:
                          with open(filepath, 'r') as f:
                              yaml.safe_load(f)
                          print(f'✅ {filepath}')
                      except Exception as e:
                          print(f'❌ {filepath}: {e}')
          "

      - name: Check file sizes
        run: |
          echo "=== File Size Check ==="
          find docs/ -name "*.md" -exec ls -lh {} \; 2>/dev/null || echo "No docs found"
          echo ""
          find . -name "*.md" -size +50k -exec ls -lh {} \; || echo "No large markdown files found"

      - name: Success message
        run: |
          echo "🎉 Quick test completed successfully!"
          echo "✅ Project structure validated"
          echo "✅ YAML files checked"
          echo "✅ File sizes appropriate" 